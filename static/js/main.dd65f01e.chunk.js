(this["webpackJsonpaqi-report"]=this["webpackJsonpaqi-report"]||[]).push([[0],{61:function(t,e,a){},62:function(t,e,a){},67:function(t,e,a){},69:function(t,e,a){},89:function(t,e,a){},90:function(t,e,a){"use strict";a.r(e);var n=a(1),c=a(19),i=a.n(c),r=(a(61),a(62),a(3)),o=a(20),s=a(21),l=a(26),u=a(25),j=a(7),d=function(t){return{type:"ADD_TO_HISTORY",payload:t}},b=a(54),O=a(50),h=a.n(O),f=(a(67),[{class:"good",range:[0,50]},{class:"satisfactory",range:[51,100]},{class:"moderate",range:[101,200]},{class:"poor",range:[201,300]},{class:"very_poor",range:[301,400]},{class:"severe",range:[401,500]}]),p="positive",v="negative",y=f.map((function(t){return t.class}));var m=a(2),x={};function g(t){var e=t.rowData,a=t.onRowClick,n=e.city,c=e.aqi,i=e.lastUpdated,r=function(t){var e;return null===(e=f.find((function(e){return t>=e.range[0]&&t<=e.range[1]})))||void 0===e?void 0:e.class}(Math.round(c)),o=function(t,e,a){return a||-1!==y.indexOf(a)?y.indexOf(e)<y.indexOf(a)?p:y.indexOf(e)>y.indexOf(a)?v:"":""}(0,r,x[n]),s="aqi-cell ".concat(r),l="aqi-row bg-animate ".concat(o);return x[n]=r,Object(m.jsxs)("tr",{className:l,onClick:a,children:[Object(m.jsx)("td",{className:"aqi-cell",children:n}),Object(m.jsx)("td",{className:s,children:c}),Object(m.jsx)("td",{className:"aqi-cell",children:h()(i).fromNow()})]})}function C(){return Object(m.jsxs)("tr",{className:"aqi-head-row",children:[Object(m.jsx)("td",{className:"aqi-cell",children:"City"}),Object(m.jsx)("td",{className:"aqi-cell",children:"Current AQI"}),Object(m.jsx)("td",{className:"aqi-cell",children:"Last Updated"})]})}var D=Object(j.b)((function(t){return{aqiCityData:t.aqi.allCityData}}))((function(t){var e=t.aqiCityData,a=t.dispatch;function n(t,e){e.ctrlKey?a({type:"ADD_REMOVE_CITY_FOR_COMPARE",payload:t.city}):a(function(t){return{type:"SELECT_SINGLE_CITY",payload:t}}(t.city))}return Object(m.jsx)("table",{className:"aqi-table",children:Object(m.jsxs)("tbody",{children:[Object(m.jsx)(C,{}),Object.entries(e).map((function(t){var e=Object(b.a)(t,2),a=e[0],c=e[1];return Object(m.jsx)(g,{rowData:c,onRowClick:n.bind(null,c)},a)}))]})})})),q=(a(69),a(70),a(6));a(89);var w=function(t){Object(l.a)(a,t);var e=Object(u.a)(a);function a(t){var n;return Object(o.a)(this,a),(n=e.call(this,t)).state={hovered:null},n.seriesDataList=[],n}return Object(s.a)(a,[{key:"render",value:function(){var t=this,e=this.props,a=e.history,n=e.cities;if(!n.length)return Object(m.jsx)("div",{className:"line-container",children:Object(m.jsxs)("div",{className:"no-data",children:["No Cities are Selected ",Object(m.jsx)("br",{})," Click on the row to see city in live chart"]})});var c=window.innerWidth-650;c=c<500?500:c;var i=function(t,e){var a=Math.min(13,e.length),n=e.length>a?e.slice(e.length-13,e.length):e,c={};t.forEach((function(t){c[t]=[]}));for(var i=function(e){t.forEach((function(t){var i=n[e][t],r={x:"".concat(5*(a-e-1)," sec ago"),y:(null===i||void 0===i?void 0:i.aqi)||null};c[t].push(r)}))},r=0;r<a;r++)i(r);return t.map((function(t){return c[t]}))}(n,a),o=this.state.hovered;return Object(m.jsx)("div",{className:"line-container",children:Object(m.jsxs)(q.g,{xType:"ordinal",height:500,width:c,margin:{bottom:70},children:[Object(m.jsx)(q.e,{}),Object(m.jsx)(q.c,{}),Object(m.jsx)(q.f,{tickLabelAngle:-45}),Object(m.jsx)(q.h,{}),i.map((function(e,a){return Object(m.jsx)(q.d,{style:{strokeWidth:"3px"},data:e,getNull:function(t){return null!==t.y},onValueMouseOver:function(e){return t.setState({hovered:Object(r.a)(Object(r.a)({},e),{},{series:n[a]})})},onValueMouseOut:function(e){return t.setState({hovered:!1})}},n[a])})),o&&Object(m.jsx)(q.b,{value:o}),Object(m.jsx)(q.a,{orientation:"horizontal",width:c,items:n})]})})}}]),a}(n.PureComponent),N=Object(j.b)((function(t){return{history:t.aqi.history,cities:t.aqi.citiesInCompare}}))(w),I=function(t){Object(l.a)(a,t);var e=Object(u.a)(a);function a(t){var n;return Object(o.a)(this,a),(n=e.call(this,t)).state={aqiData:{}},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var t=this,e=!0,a=this,n=new WebSocket("wss://city-ws.herokuapp.com");n.onopen=function(t){console.info("ws connection opened",t)},n.onmessage=function(t){if(a.onAQIDataChange(JSON.parse(t.data)),e){var n=a.props,c=n.dispatch,i=n.aqiCityData;c(d(i))}e=!1},n.onerror=function(t){console.error("ws connection error",t)},setInterval((function(){var e=t.props,a=e.dispatch,n=e.aqiCityData;a(d(n))}),5e3)}},{key:"onAQIDataChange",value:function(t){var e=new Date,a=this.props,n=a.dispatch,c=a.aqiCityData,i=Object.fromEntries(t.map((function(t){return[t.city,Object(r.a)(Object(r.a)({},t),{},{aqi:+(+t.aqi).toFixed(2),lastUpdated:e})]})));n({type:"ADD_DATA",payload:Object(r.a)(Object(r.a)({},c),i)})}},{key:"render",value:function(){return Object(m.jsxs)("div",{className:"home-page-container",children:[Object(m.jsx)("div",{className:"heading",children:"- Air Quality Monitoring -"}),Object(m.jsxs)("div",{className:"body-container",children:[Object(m.jsx)(D,{}),Object(m.jsx)(N,{})]})]})}}]),a}(n.PureComponent),_=Object(j.b)((function(t){return{aqiCityData:t.aqi.allCityData}}))(I);var A=function(){return Object(m.jsx)(_,{})},E=function(t){t&&t instanceof Function&&a.e(3).then(a.bind(null,92)).then((function(e){var a=e.getCLS,n=e.getFID,c=e.getFCP,i=e.getLCP,r=e.getTTFB;a(t),n(t),c(t),i(t),r(t)}))},T=a(13),k=a(52),S=a(37),R={allCityData:{},sort:{by:"city",order:"asc"},history:[],citiesInCompare:[]};function M(t,e){var a=[].concat(Object(S.a)(t),[e]);return a.length<=60?a:Object(k.a)(a).slice(1)}var L=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"ADD_DATA":return Object(r.a)(Object(r.a)({},t),{},{allCityData:e.payload});case"ADD_TO_HISTORY":var a=M(t.history,e.payload);return Object(r.a)(Object(r.a)({},t),{},{history:a});case"ADD_REMOVE_CITY_FOR_COMPARE":var n=t.citiesInCompare,c=e.payload;return n=n.includes(c)?n.filter((function(t){return t!==c})):[].concat(Object(S.a)(n),[c]),Object(r.a)(Object(r.a)({},t),{},{citiesInCompare:n});case"SELECT_SINGLE_CITY":return Object(r.a)(Object(r.a)({},t),{},{citiesInCompare:[e.payload]});default:return t}},F=Object(T.combineReducers)({aqi:L}),P=a(53),Y=Object(T.createStore)(F,Object(P.composeWithDevTools)());i.a.render(Object(m.jsx)(j.a,{store:Y,children:Object(m.jsx)(A,{})}),document.getElementById("root")),E()}},[[90,1,2]]]);
//# sourceMappingURL=main.dd65f01e.chunk.js.map