(this["webpackJsonpaqi-report"]=this["webpackJsonpaqi-report"]||[]).push([[0],{61:function(t,e,a){},62:function(t,e,a){},67:function(t,e,a){},69:function(t,e,a){},89:function(t,e,a){},90:function(t,e,a){"use strict";a.r(e);var n=a(1),c=a(19),i=a.n(c),r=(a(61),a(62),a(3)),o=a(20),s=a(21),l=a(26),u=a(25),j=a(7),d=function(t){return{type:"ADD_TO_HISTORY",payload:t}},b=a(27),O=a(51),h=a.n(O),f=(a(67),[{class:"good",range:[0,50]},{class:"satisfactory",range:[51,100]},{class:"moderate",range:[101,200]},{class:"poor",range:[201,300]},{class:"very_poor",range:[301,400]},{class:"severe",range:[401,500]}]),p="positive",v="negative",y=a(2),m={},x=f.map((function(t){return t.class}));function g(t){var e=t.rowData,a=t.onRowClick,n=function(t){var e;return null===(e=f.find((function(e){return t>=e.range[0]&&t<=e.range[1]})))||void 0===e?void 0:e.class}(Math.round(e.aqi)),c=function(t,e){var a=m[e];if(!a&&-1===x.indexOf(a))return"";if(x.indexOf(t)<x.indexOf(a))return p;if(x.indexOf(t)>x.indexOf(a))return v;return""}(n,e.city),i="aqi-cell ".concat(n),r="aqi-row bg-animate ".concat(c);return m[e.city]=n,Object(y.jsxs)("tr",{className:r,onClick:a,children:[Object(y.jsx)("td",{className:"aqi-cell",children:e.city}),Object(y.jsx)("td",{className:i,children:e.aqi}),Object(y.jsx)("td",{className:"aqi-cell",children:h()(e.lastUpdated).fromNow()})]})}function C(){return Object(y.jsxs)("tr",{className:"aqi-head-row",children:[Object(y.jsx)("td",{className:"aqi-cell",children:"City"}),Object(y.jsx)("td",{className:"aqi-cell",children:"Current AQI"}),Object(y.jsx)("td",{className:"aqi-cell",children:"Last Updated"})]})}function D(t,e){var a=Object(b.a)(t,2),n=(a[0],a[1]),c=Object(b.a)(e,2),i=(c[0],c[1]);return n.city>i.city?1:n.city>i.city?-1:0}var q=Object(j.b)((function(t){return{aqiCityData:t.aqi.allCityData}}))((function(t){var e=t.aqiCityData,a=t.dispatch;function n(t,e){e.ctrlKey?a({type:"SELECT_SINGLE_CITY",payload:t.city}):a(function(t){return{type:"ADD_REMOVE_CITY_FOR_COMPARE",payload:t}}(t.city))}return Object(y.jsx)("table",{className:"aqi-table",children:Object(y.jsxs)("tbody",{children:[Object(y.jsx)(C,{}),Object.entries(e).sort(D).map((function(t){var e=Object(b.a)(t,2),a=e[0],c=e[1];return Object(y.jsx)(g,{rowData:c,onRowClick:n.bind(null,c)},a)}))]})})})),N=(a(69),a(70),a(6)),w=(a(89),function(t){Object(l.a)(a,t);var e=Object(u.a)(a);function a(t){var n;return Object(o.a)(this,a),(n=e.call(this,t)).state={hovered:null},n.seriesDataList=[],n}return Object(s.a)(a,[{key:"render",value:function(){var t=this,e=this.props,a=e.history,n=e.cities;if(!n.length)return Object(y.jsx)("div",{className:"line-container",children:Object(y.jsxs)("div",{className:"no-data",children:["No Cities are Selected ",Object(y.jsx)("br",{})," Click on the row to see city in live chart"]})});var c=window.innerWidth-650;c=c<500?500:c;var i=function(t,e){var a=13,n=Math.min(a,e.length),c=e.length>n?e.slice(e.length-a,e.length):e,i={};t.forEach((function(t){i[t]=[]}));for(var r=function(e){t.forEach((function(t){var a=c[e][t],r={x:"".concat(5*(n-e-1)," sec ago"),y:(null===a||void 0===a?void 0:a.aqi)||null};i[t].push(r)}))},o=0;o<n;o++)r(o);return t.map((function(t){return i[t]}))}(n,a),o=this.state.hovered;return Object(y.jsx)("div",{className:"line-container",children:Object(y.jsxs)(N.g,{xType:"ordinal",height:500,width:c,margin:{bottom:70},children:[Object(y.jsx)(N.e,{}),Object(y.jsx)(N.c,{}),Object(y.jsx)(N.f,{tickLabelAngle:-45}),Object(y.jsx)(N.h,{}),i.map((function(e,a){return Object(y.jsx)(N.d,{style:{strokeWidth:"3px"},data:e,getNull:function(t){return null!==t.y},onValueMouseOver:function(e){return t.setState({hovered:Object(r.a)(Object(r.a)({},e),{},{series:n[a]})})},onValueMouseOut:function(e){return t.setState({hovered:!1})}},n[a])})),o&&Object(y.jsx)(N.b,{value:o}),Object(y.jsx)(N.a,{orientation:"horizontal",width:c,items:n})]})})}}]),a}(n.PureComponent));var I=Object(j.b)((function(t){return{history:t.aqi.history,cities:t.aqi.citiesInCompare}}))(w),_=function(t){Object(l.a)(a,t);var e=Object(u.a)(a);function a(t){var n;return Object(o.a)(this,a),(n=e.call(this,t)).state={aqiData:{}},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var t=this,e=!0,a=this,n=new WebSocket("wss://city-ws.herokuapp.com");n.onopen=function(t){console.log("open",t)},n.onmessage=function(t){if(a.onAQIDataChange(JSON.parse(t.data)),e){var n=a.props,c=n.dispatch,i=n.aqiCityData;c(d(i))}e=!1},setInterval((function(){var e=t.props,a=e.dispatch,n=e.aqiCityData;a(d(n))}),5e3)}},{key:"onAQIDataChange",value:function(t){var e=new Date,a=this.props,n=a.dispatch,c=a.aqiCityData,i=Object.fromEntries(t.map((function(t){return[t.city,Object(r.a)(Object(r.a)({},t),{},{aqi:+(+t.aqi).toFixed(2),lastUpdated:e})]})));n({type:"ADD_DATA",payload:Object(r.a)(Object(r.a)({},c),i)})}},{key:"render",value:function(){return Object(y.jsxs)("div",{className:"home-page-container",children:[Object(y.jsx)("div",{className:"heading",children:"- Air Quality Monitoring -"}),Object(y.jsxs)("div",{className:"body-container",children:[Object(y.jsx)(q,{}),Object(y.jsx)(I,{})]})]})}}]),a}(n.PureComponent),A=Object(j.b)((function(t){return{aqiCityData:t.aqi.allCityData}}))(_);var E=function(){return Object(y.jsx)(A,{})},T=function(t){t&&t instanceof Function&&a.e(3).then(a.bind(null,92)).then((function(e){var a=e.getCLS,n=e.getFID,c=e.getFCP,i=e.getLCP,r=e.getTTFB;a(t),n(t),c(t),i(t),r(t)}))},k=a(13),S=a(53),R=a(38),M={allCityData:{},sort:{by:"city",order:"asc"},history:[],citiesInCompare:[]};function L(t,e){var a=[].concat(Object(R.a)(t),[e]);return a.length<=60?a:Object(S.a)(a).slice(1)}var F=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"ADD_DATA":return Object(r.a)(Object(r.a)({},t),{},{allCityData:e.payload});case"ADD_TO_HISTORY":var a=L(t.history,e.payload);return Object(r.a)(Object(r.a)({},t),{},{history:a});case"ADD_REMOVE_CITY_FOR_COMPARE":var n=t.citiesInCompare,c=e.payload;return n=n.includes(c)?n.filter((function(t){return t!==c})):[].concat(Object(R.a)(n),[c]),Object(r.a)(Object(r.a)({},t),{},{citiesInCompare:n});case"SELECT_SINGLE_CITY":return Object(r.a)(Object(r.a)({},t),{},{citiesInCompare:[e.payload]});default:return t}},P=Object(k.combineReducers)({aqi:F}),Y=a(54),Q=Object(k.createStore)(P,Object(Y.composeWithDevTools)());i.a.render(Object(y.jsx)(j.a,{store:Q,children:Object(y.jsx)(E,{})}),document.getElementById("root")),T()}},[[90,1,2]]]);
//# sourceMappingURL=main.340ee394.chunk.js.map